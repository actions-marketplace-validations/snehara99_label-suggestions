// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
import { __asyncGenerator, __await } from "tslib";
import { toSSE } from "./sse.js";
export async function getSSEs(response) {
    const iter = await getStream(response);
    return toSSE(iter);
}
function toAsyncIterable(stream) {
    return __asyncGenerator(this, arguments, function* toAsyncIterable_1() {
        const reader = stream.getReader();
        try {
            while (true) {
                const { value, done } = yield __await(reader.read());
                if (done) {
                    return yield __await(void 0);
                }
                yield yield __await(value);
            }
        }
        finally {
            reader.releaseLock();
        }
    });
}
async function getStream(response) {
    const stream = (await response.asBrowserStream()).body;
    if (!stream)
        throw new Error("No stream found in response. Did you enable the stream option?");
    return toAsyncIterable(stream);
}
//# sourceMappingURL=getSSEs.browser.js.map